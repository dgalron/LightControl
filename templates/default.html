
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lights</title>
    <!--Cover template for Bootstrap, by @mdo.-->
    <!-- Bootstrap core CSS -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
      <!-- Custom styles for this template -->
    <link href="static/cover.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  </head>
  <body>
    <div id="site" class="container off">
      <div class="site-wrapper-inner">
        <div class="cover-container">

          <div class="inner cover">
            <h1 class="cover-heading">Control the lights.</h1>
            <p class="lead">Daniel and Clair invite you to mess with their lights.</p>
            </br>
          </div>
          <div>
              <!-- Single dropdown -->
              <i id="power" class="fa fa-power-off btn btn-info fa-5x"></i>

              </br>
              </br>
              </br>
              ...

          </div>

          <div class="mastfoot">
            <div class="inner">
            </div>
          </div>

        </div>

      </div>

    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>


        $("#power").click(function(e){
            var power = $("#site.off").length ? 1 : 0;

            var data = { power_state : power };
            var url = document.URL.split('#')[0] + "api/power";

            send_request(url, data);

            $("#site").toggleClass("off").toggleClass("on");

            e.preventDefault();
        });


        var send_request = function(url, data) {
            $.ajax({
              type: "POST",
              url: url,
              data: JSON.stringify(data),
              contentType: "application/json; charset=utf-8",
            }).fail(function() {
                alert("oh noes! There was an error.");
            }).done(function(resp) {
              //alert(resp.power);
            });
        }


    </script>
  </body>
</html>
